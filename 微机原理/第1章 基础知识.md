# 第1章 基础知识

## 1.1 数制及编码

### 1.1.1 数制转换

- 十进制转二进制：除二取余倒数法
- 二进制转十进制：加权
- 二进制与十六进制互转：4位1组

### 1.1.2 数值编码

**原码**：最高位表示符号，0为正，1为负

8位二进制数范围为$-127\sim-0\sim+0\sim+127$

16位二进制数范围为$-32767\sim-0\sim+0\sim+32767$

原码中真值0有正负两种表示方式，无符号数的表示范围为两倍。

**反码**：正数的反码是自己，负数的为除符号位外各位都取反

**补码**：正数的补码是它自己，负数的补码为反码加一。表示范围为$+127\sim-128$

减去一个数相当于加上它的负数，也就是补码相加。

**十进制编码**：8421，余3码，格雷码。

### 1.1.3 非数值编码

**ASCII码、汉字码**

## 1.2 微型计算机概念

### 1.2.1 常用单位及术语

1. **位（bit）**：二进制数的位。
2. **字节（Byte）**：8位（bit）为一字节，用B表示。
3. **字（Word）**：16位二进制数，2字节为一个字。
4. **字长**：一次可以并行处理的数据的位数，即数据线的条数，通常与寄存器、运算器、总线宽度一致。
5. **MIPS**：单字长定点指令平均执行速度，衡量CPU速度的指标。
6. **地址**：存储单元的编号，通常8bit为一个单元，每个单元都有独立编号，存储器地址的最大编号由地址线条数决定。16条为64KB（0000H~FFFFH），20条为1MB。
7. **总线**：CPU是微型计算机的核心，微型计算机利用三条总线将CPU与系统的其他部件联系起来。
8. **访问**：CPU对寄存器、存储器或I/O接口电路的操作分为两类：把数据存入寄存器、存储器或I/O接口电路的操作称为写入或写操作；把数据从寄存器、存储器或I/O接口电路取到CPU的操作称为读出或读操作，统称为访问。
9. **机器指令**：是由二进制代码组成的可以直接由微处理器进行译码、执行的代码。一条机器指令应包含要求微处理器完成的操作以及参与该操作的数据或该数据所在的地址，有时还要由操作结果的存放地址信息。
10. **汇编与反汇编**：把汇编语言源程序翻译成与之相对应的二进制数表示的机器语言的过程叫汇编；把二进制数表示的机器语言形式的程序翻译成汇编语言形式的源程序的过程叫反汇编。

### 1.2.2 微型计算机的基本构成

<img src="./Images/第1章 基础知识/图 1.1.png" alt="图 1.1" style="zoom:50%;" />

计算机系统中各个部件之间传送信息的公共线路称为总线(bus)，分为**数据总线、地址总线和控制总线**，分别用来传输数据、地址和控制信号。

**地址总线AB(Address Bus)**是单向的，输出地址信号，即输出将要访问的存储器单元或I/O的地址，地址线的多少决定了系统直接寻址存储器的范围。

**数据总线DB(Data Bus)**是传输数据或代码的一组信号线，数据线的数目一般与处理器的字长相等。数据线的多少决定了一次能够传输数据的位数，数据在CPU与存储器或I/O接口间的传送可以是双向的，也被称为双向总线。CPU读写时的数据都是通过DB内外传输。任何时刻，数据总线上都不能同时出现两个数据。

**控制总线CB(Control Bus)**用来传送各种控制信号和状态信号，控制信号间是相互独立的，若符号上有一条横线，表示低电平有效，否则为高电平有效。

某时刻只能有一个发送者向总线发送信号，但是可以有多个设备从总线上同时获取信号。

微处理器简称**MP(Micro Processor)**，也称μP。微处理器通常称为中央处理单元，是在一片硅片上集成了**运算器(Arithmetic Logic Unit,ALU)**、**控制器(Control Unit,CU)**、**寄存器(Register,R)**、内部总线等电路。

**寄存器**一般包含在CPU内部，最大特点是存取时一般不需要经过外部总线，存取速度很快。**存储器**包括程序存储器和数据存储器，每个存储器单元具有一个地址，单元中存储一个字节内容。

### 1.2.3 微控制器与嵌入式系统

<img src="./Images/第1章 基础知识/图 1.2.png" alt="图 1.2" style="zoom:50%;" />

1. **微处理器**：运用集成技术将运算器、控制器集成在一片芯片上，其功能是：对指令译码并执行规定动作；能与存储器及外设交换数据；可相应其他部件的中断请求；提供系统所需的定时和控制。
2. **微型计算机**：在微处理器的基础上配置存储器。I/O接口电路、系统总线等所构成的系统。
3. **微型计算机系统**：上图。
4. **微控制器(MCU, Micro Controller Unit)**：是指一个集成在一块芯片上的完整计算机系统，具有一个完整计算机所需要的大部分部件：**CPU、存储器、内部和外部总线系统**。同时集成诸如通信接口、定时器、实时时钟等外围设备。
5. **嵌入式系统**：以应用为中心，以计算机技术为基础，软件硬件可裁剪，适应应用系统对功能、可靠性、成本、体积、功耗严格要求的专用计算机系统。架构可以分为四个部分：**处理器、存储器、I/O接口和软件**。处理器一般有下面几类：**嵌入式微处理器(MPU)、嵌入式微控制器(MCU)、嵌入式DSP处理器(DSP)和嵌入式片上系统(SoC)**。

### 1.2.4 常见技术

- **冯诺依曼结构**：

  - 计算机包括**运算器、控制器、存储器和输入/输出设备**
  - 计算机内部应采用**二进制**来表示指令和数据
  - 将编写好的程序和数据保存到存储器，计算机自动地逐条取出指令和数据进行分析、处理和执行

  <img src="./Images/第1章 基础知识/图 1.3.png" alt="图 1.3" style="zoom:50%;" />

  程序指令和数据**不加区分**，均采用数据总线进行传输，因此数据访问和指令存取**不能同时**在总线上传输。

- **哈佛结构**：程序和数据使用各自独立的存储器。

  - 独立的程序存储器和数据存储器为数字信号处理提供了较高的性能
  - 指令和数据可以有不同的数据宽度，具有较高的效率

  <img src="./Images/第1章 基础知识/图 1.4.png" alt="图 1.4" style="zoom:50%;" />

  但是很难在哈佛体系结构的计算机上写出一个自修改的程序

- **高速缓冲存储器Cashe**：当CPU要从内存中读取一个数据时，先在Cache中查找是否有该数据，若有，则立即从Cache中读到CPU，否则用一个主存储器访问时间从主存储器中读取这个数据送CPU。同时将包含这个数据字的整个数据块送到Cache中。有效减少了CPU访问低速内存的次数，提高读取数据的速度和整机的性能。

- **流水线技术**：在程序执行多条指令重叠进行操作段一种准并行处理实现技术。

  <img src="./Images/第1章 基础知识/图 1.5.png" alt="图 1.5" style="zoom:50%;" />

- **CISC和RISC**：复杂指令系统计算机(Complex Instruction Set Computer, CISC)和精简指令计算机(Reduced Instruction Set Computer, RISC)。

  - CISC结构的处理器都有一个指令集，每执行一条指令，处理器要在几百条指令中分类查找对应指令，需要一定时间；由于指令的复杂，增加了处理器的结构复杂性以及逻辑电路的级数，降低了时钟频率，使指令执行的速度变慢。
  - RISC指令集结构只有少数简单的指令，将CPU的时钟频率提得很高，配合流水线结构可以做到一个时钟周期执行一条指令。特点为：选取使用频率最高的一些简单指令；指令长度固定，指令格式和寻址方式种类少；只有取数据和存数据指令访问存储器，其余指令的操作数在寄存器之间进行。

## 1.3 ARM概述

Advanced RISC Machine, ARM。是32位RISC处理架构。Cortex是ARM的全新架构，本质上是ARM V7的实现，存在三种：

- 应用系列Cortex-A：适用于需要运行复杂应用程序的场合
- 实时控制系列Cortex-R：适用于实时性要求较高的应用场合
- 微控制器系列Cortex-M：适合于要求高性能低成本的应用场合
