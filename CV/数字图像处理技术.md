# 数字图像处理技术

## 1 图像增强

### 1.1 概述

有目的地强调图像的整体或局部特性，将原来不清晰的图像变得清晰或强调某些感兴趣的特征,扩大图像中不同物体特征之间的差别，抑制不感兴趣的特征，使之改善图像质量、丰富信息量,加强图像判读和识别效果，满足某些特殊分析的需要。

可以分为**频域法**和**空间域法**。频域法把图像看成一种二维信号，对其进行基于二维傅里叶变换的信号增强。

空间域直接对像素进行处理，主要分为**点处理**和**区域处理**。定义公式如下：
$$
g(x,y)=T[f(x,y)]
$$
**点处理**主要包括**灰度变换**和**直方图处理**，灰度变换有**线性、对数和幂次函数**，灰度变换主要有以下四种：**亮度调整、对比度拉伸、局部提高或降低对比度**、**灰度切片**。直方图处理主要有**直方图均衡化**和**直方图规定化**。

**区域处理**方法为图像平滑和图像锐化，图像平滑常用的方式有**邻域平均、中值滤波**。图像锐化常用梯度锐化算子，有**Robert、Sobel、Prewitt、Laplacian**。

频域处理建立在傅里叶变换的基础上，将原来的图像以某种形式转换到其他空间中，主要方法有**高通滤波、低通滤波、同态滤波和陷波滤波**。定义公式为
$$
G(u,v)=H(u,v)F(u,v)
$$
低通滤波去除噪声，常用滤波器有四种：**理想低通滤波器、巴特沃斯低通滤波器、指数滤波器、梯形低通滤波器**。高通滤波通过高频分量，削弱低频分量，强化变换和细节，有四类：**理想高通滤波器、巴特沃斯高通滤波器、指数滤波器、梯形滤波器**。

同态滤波是一种在频域中同时压缩图像亮度范围和增强图像对比度的方法，即把频率过滤和灰度变换结合起来。为了分离加性组合的信号，常采用线性滤波的方法，非线性信号的组合常转化成线性，处理后再做反变换恢复图像。

<img src="./Images/数字图像处理技术/图 1.png" alt="图 1" style="zoom:50%;" />

<img src="./Images/数字图像处理技术/图 2.png" alt="图 2" style="zoom:50%;" />

图像增强注意方面：

- 提高图像整体和局部的对比度
- 增强图像的同时避免放大噪声
- 增强后图像应具有良好的视觉效果
- 图像增强算法应具有较好的实时性

### 1.2 图像滤波

目的是消除数字图像中的噪声点，同时进行特征提取，作为后续操作的预处理。

分类：

- **线性滤波**：对于输入的信号进行的是线性运算，包含方框滤波、均值滤波、高斯滤波、拉普拉斯滤波、sobel算子等。卷积滤波和相关滤波都是线性滤波，区别在于加权系数和对应相乘顺序有所不同。
- **非线性滤波**：输出信号是输入经过非线性运算得到的，比如中值滤波、双边滤波。
- **高通滤波**：去除图像中低频部分，保留高频，处理后保留了高频边缘和纹理细节，对应图像锐化。
- **低通滤波**：保留低频去除高频，表现为纹理细节都被模糊，对应图像的平滑模糊。
- **空间滤波和频域滤波**：空间滤波直接在像素对应坐标上对图像进行处理，频域滤波则是把图像由空间域变换到频域，在频域进行处理，结束后再回到空间域。

### 1.3 图像平滑

**均值滤波：**

对于$N\times N$个像素的图像$f(x,y)$，平滑后得到$g(x,y)$，有如下关系
$$
g(x,y)=\frac{1}{M}\sum_{(m,n)\in s}f(m,n)
$$
<img src="./Images/数字图像处理技术/图 3.png" alt="图 3" style="zoom:30%;" />

为了克服图像的模糊问题，采用阈值法减少模糊效应
$$
g(x,y)=\begin{cases}\dfrac{1}{M}\sum_\limits{(m,n)\in S}f(m,n)&\text{若}|f(x,y)-\dfrac{1}{M}\sum_\limits{(m,n)\in S}f(m,n)|>T\\f(x,y)&\text{其它}&\end{cases}
$$
当邻域内的点的灰度值和平均值的差距大于阈值$T$时，用平均值来代替该点灰度值，否则保留原值。

平滑掩膜卷积算子：
$$
H_1=\frac{1}{9}\begin{bmatrix}1&1&1\\1&1&1\\1&1&1\end{bmatrix}
$$
**边界填充问题**：

- 不做边界处理：滤波器没有扩展到图像的四周
- 填充0：再扩展边界中填充0，滤波后会出现一条黑色的边框
- 填充最近的像素值：扩展部分填充最近的像素的值

**中值滤波**：确定一个基于像素的滑动窗口W，窗口内像素按从小到大排序后，用中间的灰度值代替原f(x,y)的灰度值成为窗口中心的灰度值
$$
\mathrm{g(x,y)=Med\left\{f(x-k,y-l)\right\},(k,l\in W)}
$$
二维中值滤波的窗口形状可以有很多种，如方形、十字形、圆形、菱形等。

**高斯滤波法：**

根据高斯函数的图像来选择权值的线性平滑滤波器，对于抑制服从正态分布的噪声非常有效，常用二维高斯函数作为滤波器。
$$
G(x,y)=\frac{1}{2\pi\sigma^2}e^{-\frac{x^2+y^2}{2\sigma^2}}
$$
只需要取均值周围3被标准差内的值即可，如下图所示高斯核

<img src="./Images/数字图像处理技术/图 4.png" alt="图 4" style="zoom:43%;" />

**高斯滤波的重要性质**：

- 二维高斯函数具有旋转对称性，即滤波器在各个方向上的平滑程度的是相同的，意味着高斯平滑滤波器在后续的边缘检测中不会偏向任一方向。
- 高斯函数是单值函数，即高斯滤波器用像素邻域的加权均值来代替该点的像素值，而每一邻域像素点权重随该点与中心点距离单调递减，图像不会失真。
- 高斯函数的傅里叶变换频谱是单瓣的，意味着平滑图像不会被不需要的高频信号所污染，同时保留了大部分所需信号。
